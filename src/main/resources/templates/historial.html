<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Historial de facturaci√≥n</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<nav class="navbar navbar-expand-lg bg-body-tertiary mb-4">
  <div class="container">
    <a class="navbar-brand" href="/">üÖøÔ∏è Parqueadero</a>
    <div class="ms-auto d-flex gap-2 align-items-center">
  <a class="btn btn-sm btn-outline-secondary" href="/">Inicio</a>
  <a class="btn btn-sm btn-outline-secondary" href="/index">Operaci√≥n</a>
    <a class="btn btn-sm btn-outline-secondary" href="/mapa">Mapa</a>
      <a class="btn btn-sm btn-outline-secondary" href="/tarifas">Tarifas</a>
      <a class="btn btn-sm btn-outline-secondary" href="/reportes">Reportes</a>
      <button id="themeBtn" class="btn btn-sm btn-outline-dark" type="button">Tema</button>
    </div>
  </div>
</nav>

<main class="container">
  <div class="card">
    <div class="card-header">Historial de facturas</div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
          <thead>
          <tr>
            <th>#</th>
            <th>Placa</th>
            <th>Tipo</th>
            <th>Salida</th>
            <th class="text-end">Total</th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="f: ${facturas}">
            <td><a th:href="@{'/facturas/' + ${f.id}}" th:text="${f.id}">1</a></td>
            <td th:text="${#lists.isEmpty(f.detalles) ? '-' : f.detalles.get(0).vehiculo.placa}">ABC123</td>
            <td th:text="${#lists.isEmpty(f.detalles) ? '-' : f.detalles.get(0).vehiculo.tipoVehiculo.nombre}">CARRO</td>
            <td th:text="${#lists.isEmpty(f.detalles) ? '-' : #temporals.format(f.detalles.get(0).vehiculo.fechaHoraSalida, 'yyyy-MM-dd HH:mm')}">2025-01-01 10:00</td>
            <td class="text-end" th:text="${#numbers.formatDecimal(f.total, 0, 'COMMA', 0, 'POINT')}">3000</td>
          </tr>
          <tr th:if="${#lists.isEmpty(facturas)}">
            <td colspan="5" class="text-center text-muted py-4">No hay facturas.</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</main>

<script>
  const themeBtn = document.getElementById('themeBtn');
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  const saved = localStorage.getItem('theme');
  if ((saved === 'dark') || (!saved && prefersDark)) document.documentElement.setAttribute('data-bs-theme', 'dark');
  themeBtn?.addEventListener('click', () => {
    const isDark = document.documentElement.getAttribute('data-bs-theme') === 'dark';
    document.documentElement.setAttribute('data-bs-theme', isDark ? 'light' : 'dark');
    localStorage.setItem('theme', isDark ? 'light' : 'dark');
  });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
